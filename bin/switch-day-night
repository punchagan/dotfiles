#!/usr/bin/env bash
# Script to switch between night and day modes in different programs
set -euo pipefail
IFS=$'\n\t'

GTK_THEME=$(gsettings get org.gnome.desktop.interface gtk-theme)
if [[ "${GTK_THEME}" == *"dark"* ]]; then
    # Currently in dark mode
    GUESSED_MODE="day"
else
    GUESSED_MODE="night"
fi

MODE="${1:-${GUESSED_MODE}}"
echo "Switching to ${MODE} mode..."

function day {
    # Emacs
    emacsclient -n -e "(load-theme 'spacemacs-light t)"
    # Gnome shell
    gsettings set org.gnome.desktop.interface gtk-theme 'Yaru-light'
}

function night {
    # Emacs
    emacsclient -n -e "(load-theme 'spacemacs-dark t)"
    # Gnome shell
    gsettings set org.gnome.desktop.interface gtk-theme 'Yaru-dark'
}

"${MODE}"
zulip-switch-day-night ~/.zulip.d/ "${MODE}"
